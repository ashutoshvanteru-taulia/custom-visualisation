!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.hello_world=e():t.hello_world=e()}(window,(function(){return function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){var n={create:function(t,e){t.innerHTML="<h1>Ready to render!</h1>"},updateAsync:function(t,e,n,a,r,o){var l=800,i=280;function s(t){var e=0,n=[],a=!1;for(j=0;j<t.length;j++){for(k=0;k<n.length;k++)t[j]==n[k]&&(a=!0);1==++e&&0==a&&n.push(t[j]),a=!1,e=0}return n}function d(t){return t=(t=t.split(".")[1]).replaceAll("_"," "),console.log("expression",t),t}console.log("data",t);var u,c=d3.scaleBand().rangeRound([0,l]).paddingInner(.05).align(.1),f=d3.scaleBand(),p=function(t,e){return function(e){return t.map((function(t){return t[e].value}))}}(t),m=a.fields.dimensions[0],y=a.fields.dimensions[1],g=a.fields.measures[0],h=a.fields.measures[1],x=m.name,v=y.name,b=g.name,E=h.name,_=d(x),w=d(b),A=d(E),B=d(v),O=p(m.name),L=(p(g.name),d3.scaleBand().range([0,l]).padding(.1),d3.scaleLinear().range([i,0])),D=d3.scaleLinear().range([i,0]),M=["#1A73E8","#12B5CB","#E52592","#E8710A","#F9AB00","#76abf1","#FF8168","#EA4335","#A8A116","#9334E6"],S=d3.scaleOrdinal().range(M),P=[],R=[b,E];u=s(O);for(var T=d3.axisBottom().scale(c),F=(d3.axisLeft(L),t[0][x].value),z=[],H=0;H<u.length;H++)z.push({dimension_1:u[H],columnDetails:[],total:0});t.forEach((function(t,e){t[x].value==F&&P.push(t[v].value),z.forEach((function(e,n){t[x].value==e.dimension_1&&(e.columnDetails.push({name:t[v].value,value:t[b].value,dimension_2:b}),e.columnDetails.push({name:t[v].value,value:t[E].value,dimension_2:E}))}))}));var C,I,q=[];console.log("overall data",z),z.forEach((function(t,e){C=0,I=0,t.columnDetails.forEach((function(t,e){b==t.dimension_2&&(t.yBegin=C,t.yEnd=t.value+C,C=t.yEnd,q.push(t.name)),E==t.dimension_2&&(t.yBegin=I,t.yEnd=t.value+I,I=t.yEnd)}))})),q=s(q),console.log("columnLabels",q);var G=[];for(H=0;H<q.length;H+=1)G.push(M[H]);var J=d3.scaleOrdinal().range(G),K=0;z.forEach((function(t,e){K=0,t.columnDetails.forEach((function(e,n){K<e.yEnd&&(K=e.yEnd),t.total=K}))})),console.log("overall data",z),t[0];var N=[b,E],Q=[],U=function(){for(var t={},e=0,n=R.length;e<n;e++)for(var a=[],r=0;r<2;r++)Q.push(N[r]+"-"+R[e]),a.push(N[r]+"-"+R[e]),t[R[e]]=a;return t}();e.innerHTML="",console.log("innercoulmns",U);var V=d3.select("#vis").append("svg").attr("width",960).attr("height",500).append("g").attr("transform","translate(80,20)");c.domain(z.map((function(t){return t.dimension_1}))),f.domain(d3.keys(U)).rangeRound([0,c.bandwidth()]).padding(.1),L.domain([0,d3.max(z,(function(t){return t.total}))]),D.domain([0,d3.max(z,(function(t){return t.total}))]),V.append("text").attr("x",400).attr("y",320).style("text-anchor","middle").text(_),V.append("g").attr("class","x axis").attr("transform","translate(0,280)").call(T).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").style("text-anchor","start"),V.append("g").attr("class","y axis").call(d3.axisLeft(L).ticks(10,"s")),V.append("text").attr("transform","rotate(-90)").attr("y",-80).attr("x",-140).attr("dy","1em").style("text-anchor","middle").text(w),V.append("text").attr("transform","rotate(-90)").attr("y",830).attr("x",-140).attr("dy","1em").style("text-anchor","middle").text(A),V.append("g").attr("class","y axis").call(d3.axisRight(D).ticks(10,"s")).attr("transform","translate(800 ,0)"),V.selectAll(".project_stackedbar").data(z).enter().append("g").attr("class","g").attr("transform",(function(t){return"translate("+c(t.dimension_1)+",0)"})).selectAll("rect").data((function(t){return t.columnDetails})).enter().append("rect").attr("x",(function(t){return f(t.dimension_2)+1})).attr("y",(function(t){return L(t.yEnd)})).attr("height",(function(t){return L(t.yBegin)-L(t.yEnd)})).style("fill",(function(t){return S(t.name)})).attr("width",f.bandwidth()).on("mouseover",(function(){X.style("display",null)})).on("mouseout",(function(){X.style("display","none")})).on("mousemove",(function(t){console.log(t);var e=d3.mouse(this)[0]-5,n=d3.mouse(this)[1]-5,a=B+": "+t.name+"\nvalue: "+(t.yEnd-t.yBegin).toString();X.attr("transform","translate("+e+","+n+")"),X.select("text").text(a)}));var W=V.selectAll(".legend").data(q.slice()).enter().append("g").attr("class","legend").attr("transform",(function(t,e){return"translate(0,"+20*e+")"}));W.append("rect").attr("x",390).attr("y",350).attr("width",18).attr("height",18).style("fill",J),W.append("text").attr("x",385).attr("y",355).attr("dy",".35em").style("text-anchor","end").text((function(t){return t}));var X=V.append("g").attr("class","tooltip").style("display","none");X.append("rect").attr("width",60).attr("height",20).attr("fill","white").style("opacity",.5),X.append("text").attr("x",30).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold"),o()}};looker.plugins.visualizations.add(n)}])}));